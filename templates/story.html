{% extends "base.html" %}

{% block content %}
<h1>Photo Stories</h1>

{% if logged_in %}
<form method="POST" enctype="multipart/form-data" action="{{ url_for('story') }}">
    <label for="image">Story Image:</label><br/>
    <input type="file" id="image" name="image" required /><br/><br/>

    <label for="caption">Caption:</label><br/>
    <textarea id="caption" name="caption" rows="3" required></textarea><br/><br/>

    <button type="submit">Upload</button>
</form>
{% else %}
<p>You need to <a href="{{ url_for('login') }}">login</a> to upload stories.</p>
{% endif %}

<hr />

<div style="display:flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
    {% for story in stories %}
        <div style="width: 300px;">
            <img src="{{ story.image_url }}" alt="Story image" style="width: 100%; border-radius: 8px;" />
            <p>{{ story.caption }}</p>
        </div>
    {% else %}
        <p>No stories yet.</p>
    {% endfor %}
</div>
{% endblock %}








